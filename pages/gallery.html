<!DOCTYPE HTML>
<!--
	Alpha by HTML5 UP
	html5up.net | @ajlkn
	Free for personal and commercial use under the CCA 3.0 license (html5up.net/license)
-->
<html>
	<head>
		<!-- Google Analytics -->
		<script async src="https://www.googletagmanager.com/gtag/js?id=G-EXTBHDX0C2"></script>
		<script>
		  window.dataLayer = window.dataLayer || [];
		  function gtag(){dataLayer.push(arguments);}
		  gtag('js', new Date());
		  gtag('config', 'G-EXTBHDX0C2');
		</script>

		<title>Tarot Card Gallery - Browse All 78 Cards | My Tarot Today</title>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />

		<!-- Favicons -->
		<link rel="icon" type="image/png" sizes="32x32" href="../images/icons/favicon-32x32.png">
		<link rel="icon" type="image/png" sizes="16x16" href="../images/icons/favicon-16x16.png">
		<link rel="apple-touch-icon" sizes="180x180" href="../images/icons/apple-touch-icon.png">
		<link rel="icon" type="image/png" sizes="192x192" href="../images/icons/icon-192.png">
		<link rel="icon" type="image/png" sizes="512x512" href="../images/icons/icon-512.png">

		<!-- SEO Meta Tags -->
		<meta name="description" content="Browse complete tarot card gallery with all 78 cards from artistic decks: Rider-Waite, Artistic, Mir√≥, and Picasso. View meanings for Major and Minor Arcana in 6 languages." />
		<meta name="keywords" content="tarot card gallery, tarot meanings, major arcana, minor arcana, tarot card meanings, rider-waite cards, picasso tarot, miro tarot, artistic tarot deck" />
		<meta name="author" content="My Tarot Today" />
		<meta name="robots" content="index, follow" />
		<link rel="canonical" href="https://mytarottoday.com/pages/gallery.html" />

		<!-- AI-Friendly Metadata (GEO - Generative Engine Optimization) -->
		<meta name="datePublished" content="2024-01-15" />
		<meta name="dateModified" content="2025-11-09" />
		<meta name="citation-policy" content="You may cite this content with attribution to My Tarot Today (mytarottoday.com)" />

		<!-- Open Graph / Facebook -->
		<meta property="og:type" content="website" />
		<meta property="og:url" content="https://mytarottoday.com/pages/gallery.html" />
		<meta property="og:title" content="Tarot Card Gallery - Browse All 78 Cards" />
		<meta property="og:description" content="Explore complete tarot card collection with 312 unique cards from artistic decks. Search by suit, view meanings, and discover artistic interpretations." />
		<meta property="og:image" content="https://mytarottoday.com/tarot-background.jpg" />
		<meta property="og:site_name" content="My Tarot Today" />
		<meta property="og:locale" content="en_US" />

		<!-- Twitter Card -->
		<meta name="twitter:card" content="summary_large_image" />
		<meta name="twitter:url" content="https://mytarottoday.com/pages/gallery.html" />
		<meta name="twitter:title" content="Tarot Card Gallery - Browse All 78 Cards" />
		<meta name="twitter:description" content="Explore complete tarot card collection with 312 unique cards from artistic decks. Search by suit, view meanings, and discover artistic interpretations." />
		<meta name="twitter:image" content="https://mytarottoday.com/tarot-background.jpg" />

		<!-- Additional Meta Tags -->
		<meta name="theme-color" content="#9370DB" />
		<meta name="language" content="English" />
		<meta name="revisit-after" content="7 days" />
		<meta name="rating" content="general" />

		<!-- Structured Data - JSON-LD -->
		<script type="application/ld+json">
		{
			"@context": "https://schema.org",
			"@type": "CollectionPage",
			"name": "Tarot Card Gallery",
			"url": "https://mytarottoday.com/pages/gallery.html",
			"description": "Complete collection of 312 tarot cards from unique artistic decks",
			"isPartOf": {
				"@type": "WebSite",
				"name": "My Tarot Today",
				"url": "https://mytarottoday.com"
			},
			"mainEntity": {
				"@type": "ItemList",
				"numberOfItems": 312,
				"itemListElement": [
					{
						"@type": "ListItem",
						"position": 1,
						"name": "Rider-Waite Classic Deck",
						"description": "78 cards - Traditional tarot symbolism"
					},
					{
						"@type": "ListItem",
						"position": 2,
						"name": "Artistic Tarot Deck",
						"description": "78 cards - Modern vibrant interpretation"
					},
					{
						"@type": "ListItem",
						"position": 3,
						"name": "Mir√≥ Surrealism Deck",
						"description": "78 cards - Inspired by Joan Mir√≥"
					},
					{
						"@type": "ListItem",
						"position": 4,
						"name": "Picasso Cubism Deck",
						"description": "78 cards - Inspired by Pablo Picasso"
					}
				]
			},
			"inLanguage": ["en", "fr", "es", "zh", "ja", "ko"]
		}
		</script>

		<!-- PWA Manifest -->
		<link rel="manifest" href="/manifest.json">
		<meta name="apple-mobile-web-app-capable" content="yes">
		<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
		<meta name="apple-mobile-web-app-title" content="My Tarot">

		<link rel="stylesheet" href="../assets/css/main.css" />
		<link rel="stylesheet" href="../assets/css/skeleton.css" />
		<style>
			/* Skip link for accessibility */
			.skip-link {
				position: absolute;
				top: -40px;
				left: 0;
				background: #9370DB;
				color: white;
				padding: 8px 16px;
				text-decoration: none;
				font-weight: bold;
				z-index: 10000;
				border-radius: 0 0 4px 0;
			}

			.skip-link:focus {
				top: 0;
			}

			/* Custom background with tarot image */
			body {
				background:
					linear-gradient(rgba(0, 0, 0, 0.7), rgba(0, 0, 0, 0.7)),
					url('../images/backgrounds/tarot-background.jpg') center/cover fixed;
			}

			#banner {
				background:
					linear-gradient(rgba(0, 0, 0, 0.5), rgba(0, 0, 0, 0.5)),
					url('../images/backgrounds/tarot-background.jpg') center/cover;
				box-shadow: inset 0 0 100px rgba(0, 0, 0, 0.3);
			}

			/* Make header text visible when scrolling over white background */
			#header:not(.alt) {
				background: rgba(255, 255, 255, 0.95) !important;
				box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
			}

			#header:not(.alt) h1 a,
			#header:not(.alt) nav a,
			#header:not(.alt) select {
				color: #333 !important;
			}

			/* Language dropdown text color and alignment */
			#language-select {
				color: #333;
			}

			#language-select option {
				line-height: 1.8;
				padding: 5px 0;
			}

			/* Deck Selection Styles */
			#deck-selection {
				padding: 60px 20px;
				text-align: center;
				background:
					radial-gradient(circle at 20% 30%, rgba(255, 215, 0, 0.08) 0%, transparent 40%),
					radial-gradient(circle at 80% 70%, rgba(147, 112, 219, 0.1) 0%, transparent 40%),
					radial-gradient(ellipse at 50% 20%, rgba(255, 255, 255, 0.8) 0%, rgba(255, 215, 0, 0.25) 25%, transparent 60%);
				background-size: 100% 100%;
				position: relative;
				animation: fadeIn 0.8s ease;
			}

			#deck-selection::before {
				content: '';
				position: absolute;
				top: 0;
				left: 0;
				right: 0;
				bottom: 0;
				background-image:
					radial-gradient(circle, rgba(255, 255, 255, 0.4) 1px, transparent 1px),
					radial-gradient(circle, rgba(255, 215, 0, 0.3) 1px, transparent 1px),
					radial-gradient(circle, rgba(147, 112, 219, 0.3) 1px, transparent 1px);
				background-size: 80px 80px, 120px 120px, 100px 100px;
				background-position: 0 0, 40px 40px, 60px 20px;
				pointer-events: none;
			}

			#deck-selection h2 {
				font-size: 1.5em;
				color: white;
				margin-bottom: 30px;
				text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
			}

			/* Search Bar Styles */
			.search-container {
				max-width: 600px;
				margin: 0 auto 30px auto;
				position: relative;
			}

			#deck-search {
				width: 100%;
				height: 50px;
				padding: 0 50px 0 50px;
				border-radius: 25px;
				border: 2px solid rgba(255, 215, 0, 0.3);
				background: rgba(255, 255, 255, 0.9);
				color: #2c3e50;
				font-size: 1em;
				box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
				transition: all 0.3s ease;
				outline: none;
			}

			#deck-search:focus {
				border-color: rgba(255, 215, 0, 0.6);
				box-shadow: 0 6px 20px rgba(255, 215, 0, 0.3);
			}

			#deck-search::placeholder {
				color: rgba(44, 62, 80, 0.5);
			}

			.search-icon {
				position: absolute;
				left: 20px;
				top: 50%;
				transform: translateY(-50%);
				color: rgba(255, 215, 0, 0.6);
				font-size: 1.2em;
				pointer-events: none;
			}

			.search-clear {
				position: absolute;
				right: 20px;
				top: 50%;
				transform: translateY(-50%);
				background: none;
				border: none;
				color: rgba(44, 62, 80, 0.5);
				font-size: 1.3em;
				cursor: pointer;
				display: none;
				transition: color 0.3s ease;
				padding: 5px;
			}

			.search-clear:hover {
				color: #2c3e50;
			}

			.search-clear.visible {
				display: block;
			}

			.no-results {
				text-align: center;
				color: white;
				font-size: 1.1em;
				margin: 30px 0;
				display: none;
				opacity: 0.8;
			}

			.no-results.visible {
				display: block;
			}

			/* Card Gallery Styles */
			#card-gallery {
				padding: 60px 20px;
				display: none;
			}

			#card-gallery.visible {
				display: block;
			}

			.back-button {
				display: inline-flex;
				align-items: center;
				gap: 10px;
				padding: 12px 24px;
				background: rgba(255, 255, 255, 0.9);
				color: #2c3e50;
				border: none;
				border-radius: 25px;
				cursor: pointer;
				font-size: 1em;
				font-weight: 600;
				transition: all 0.3s ease;
				margin-bottom: 30px;
				box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
			}

			.back-button:hover {
				background: white;
				transform: translateX(-5px);
				box-shadow: 0 6px 20px rgba(0, 0, 0, 0.3);
			}

			.gallery-title {
				font-size: 2em;
				color: white;
				text-align: center;
				margin-bottom: 40px;
				text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
			}

			.card-grid {
				display: grid;
				grid-template-columns: repeat(6, 1fr);
				gap: 20px;
				max-width: 1400px;
				margin: 0 auto;
			}

			.card-thumbnail {
				aspect-ratio: 2/3;
				border-radius: 10px;
				overflow: hidden;
				cursor: pointer;
				transition: transform 0.3s ease, box-shadow 0.3s ease;
				box-shadow: 0 4px 15px rgba(0, 0, 0, 0.3);
				background: linear-gradient(135deg, #f5f5f5 0%, #e0e0e0 100%);
				will-change: transform;
				content-visibility: auto;
			}

			.card-thumbnail:hover {
				transform: scale(1.05) translateY(-5px);
				box-shadow: 0 8px 25px rgba(255, 215, 0, 0.4);
			}

			.card-thumbnail picture {
				width: 100%;
				height: 100%;
				display: block;
			}

			.card-thumbnail img {
				width: 100%;
				height: 100%;
				object-fit: cover;
				display: block;
				background: linear-gradient(135deg, #f5f5f5 0%, #e0e0e0 100%);
			}

			/* Lightbox Styles */
			#lightbox {
				display: none;
				position: fixed;
				top: 0;
				left: 0;
				width: 100%;
				height: 100%;
				background: rgba(0, 0, 0, 0.9);
				backdrop-filter: blur(10px);
				z-index: 10000;
				justify-content: center;
				align-items: center;
				animation: fadeIn 0.3s ease;
			}

			#lightbox.visible {
				display: flex;
			}

			.lightbox-content {
				position: relative;
				max-width: 90%;
				max-height: 90%;
				animation: zoomIn 0.3s ease;
			}

			.lightbox-content img {
				max-width: 100%;
				max-height: 90vh;
				border-radius: 15px;
				box-shadow: 0 20px 60px rgba(0, 0, 0, 0.5);
				/* Support for pinch-to-zoom (MEDIUM PRIORITY FIX) */
				transform-origin: center center;
				transition: transform 0.3s ease;
				touch-action: none;
			}

			.lightbox-close {
				position: absolute;
				top: -50px;
				right: 0;
				background: rgba(255, 255, 255, 0.9);
				border: none;
				width: 40px;
				height: 40px;
				border-radius: 50%;
				font-size: 24px;
				cursor: pointer;
				display: flex;
				align-items: center;
				justify-content: center;
				transition: all 0.3s ease;
				color: #2c3e50;
				font-weight: bold;
			}

			.lightbox-close:hover {
				background: white;
				transform: rotate(90deg);
			}

			.lightbox-card-name {
				text-align: center;
				color: white;
				font-size: 1.5em;
				margin-top: 20px;
				text-shadow: 2px 2px 4px rgba(0,0,0,0.5);
			}

			@keyframes zoomIn {
				from {
					transform: scale(0.8);
					opacity: 0;
				}
				to {
					transform: scale(1);
					opacity: 1;
				}
			}

			.deck-options {
				display: grid;
				grid-template-columns: repeat(3, 1fr);
				gap: 40px;
				max-width: 1200px;
				margin: 0 auto;
			}

			.deck-card {
				background: white;
				border-radius: 20px;
				padding: 30px;
				cursor: pointer;
				transition: all 0.4s cubic-bezier(0.165, 0.84, 0.44, 1);
				box-shadow: 0 10px 30px rgba(0,0,0,0.2);
			}

			.deck-card:hover {
				transform: translateY(-15px) scale(1.05);
				box-shadow: 0 20px 50px rgba(0,0,0,0.3);
			}

			.deck-preview {
				width: 100%;
				aspect-ratio: 2/3;
				border-radius: 15px;
				overflow: hidden;
				margin-bottom: 20px;
				position: relative;
				background: #f0f0f0;
			}

			.deck-preview.geometric {
				overflow: hidden !important;
			}

			.deck-preview .geometric {
				position: absolute;
			}

			.deck-preview img {
				width: 100%;
				height: 100%;
				object-fit: cover;
			}

			.deck-card h3 {
				font-size: 1.2em;
				color: #2c3e50;
				margin-bottom: 10px;
			}

			.deck-card p {
				color: #666;
				font-size: 1em;
				margin-bottom: 10px;
			}

			.fade-out {
				animation: fadeOut 0.5s ease forwards;
			}

			@keyframes fadeIn {
				from { opacity: 0; transform: translateY(20px); }
				to { opacity: 1; transform: translateY(0); }
			}

			@keyframes fadeOut {
				to { opacity: 0; }
			}

			.hidden {
				display: none !important;
			}


			.box.special {
				background: rgba(255, 255, 255, 0.95);
				backdrop-filter: blur(10px);
				box-shadow: 0 10px 40px rgba(0,0,0,0.3);
			}

			#header {
				background: rgba(255, 255, 255, 0.95);
				backdrop-filter: blur(10px);
			}

			.box.special.features {
				background: rgba(255, 255, 255, 0.9);
			}

			#footer {
				background: rgba(0, 0, 0, 0.4);
				backdrop-filter: blur(10px);
			}

			#main.container {
				padding-top: 50px;
			}

			#banner h2#title {
				font-family: 'Apple Chancery', cursive, serif;
				font-size: 3.5em;
				font-weight: normal;
				letter-spacing: 1px;
			}

			/* Mobile responsive */

			@media (max-width: 768px) {
				.deck-options {
					grid-template-columns: repeat(3, 1fr);
					gap: 12px;
					padding: 0 8px;
				}

				.deck-card {
					padding: 16px 12px;
					min-height: 48px;
				}

				.deck-card h3 {
					font-size: 0.85em;
					margin-bottom: 5px;
				}

				.deck-card p {
					font-size: 0.75em;
				}

				.deck-preview {
					margin-bottom: 10px;
				}

				.card-grid {
					grid-template-columns: repeat(3, 1fr);
					gap: 10px;
				}

				.gallery-title {
					font-size: 1.5em;
				}
			}

			@media (max-width: 1024px) {
				.card-grid {
					grid-template-columns: repeat(4, 1fr);
				}
			}
		</style>
	</head>
	<body class="landing is-preload">
		<a href="#main" class="skip-link">Skip to main content</a>
		<div id="page-wrapper">

			<!-- Header -->
				<header id="header" class="alt">
					<h1><a href="../index.html">üîÆ My Tarot Today</a></h1>
					<nav id="nav">
						<ul>
							<li><a href="../index.html">Card of Today</a></li>
							<li><a href="gallery.html">Gallery</a></li>
							<li><a href="journey.html">Fool's Journey</a></li>
							<li><a href="dictionary.html">Dictionary</a></li>
							<li class="language-dropdown">
								<select id="language-select" onchange="changeLanguage()" aria-label="Select language" style="padding: 10px 20px; border-radius: 25px; border: 2px solid rgba(255, 255, 255, 0.8); font-size: 0.95em; background: rgba(255, 255, 255, 0.95); cursor: pointer; transition: all 0.3s ease; font-weight: 500; line-height: 1.4; vertical-align: middle;">
									<option value="en">üá¨üáß English</option>
									<option value="fr">üá´üá∑ Fran√ßais</option>
									<option value="es">üá™üá∏ Espa√±ol</option>
									<option value="zh">üá®üá≥ ‰∏≠Êñá</option>
									<option value="ja">üáØüáµ Êó•Êú¨Ë™û</option>
									<option value="ko">üá∞üá∑ ÌïúÍµ≠Ïñ¥</option>
								</select>
							</li>
						</ul>
					</nav>
				</header>

			<!-- Banner -->
				<section id="banner">
					<h2 id="title">Card Gallery</h2>
					<p id="subtitle">Browse all cards from each deck</p>
				</section>

			<!-- Main -->
				<section id="main" class="container">

					<!-- Deck Selection -->
					<section id="deck-selection">
						<!-- Search Bar -->
						<div class="search-container">
							<span class="search-icon">üîç</span>
							<input
								type="text"
								id="deck-search" aria-label="Search decks"
								placeholder="Search for a deck..."
								data-translate-placeholder="searchPlaceholder"
								oninput="filterDecks()"
							>
							<button class="search-clear" onclick="clearSearch()" aria-label="Clear search">‚úï</button>
						</div>
						<div class="no-results" id="no-results" data-translate="noResults">No decks found</div>

						<div class="deck-options">
							<!-- Rider-Waite Classic -->
							<div class="deck-card" onclick="selectDeck('rider')" tabindex="0" onkeydown="if(event.key==='Enter'||event.key===' '){event.preventDefault();selectDeck('rider');}" role="button" aria-label="Select Rider-Waite Classic deck">
								<div class="deck-preview">
									<img src="../decks/images/major_arcana/00-the-fool.png" alt="The Fool">
								</div>
								<h3 data-translate="riderWaite">Rider-Waite Classic</h3>
							</div>

							<!-- Artistic Tarot -->
							<div class="deck-card" onclick="selectDeck('artistic')" tabindex="0" onkeydown="if(event.key==='Enter'||event.key===' '){event.preventDefault();selectDeck('artistic');}" role="button" aria-label="Select Artistic Tarot deck">
								<div class="deck-preview">
									<img src="../decks/artistic-tarot-cards/02-the-magician.png" alt="The Magician">
								</div>
								<h3 data-translate="artistic">Artistic Tarot</h3>
							</div>

							<!-- Mir√≥ Surrealism -->
							<div class="deck-card" onclick="selectDeck('miro')" tabindex="0" onkeydown="if(event.key==='Enter'||event.key===' '){event.preventDefault();selectDeck('miro');}" role="button" aria-label="Select Mir√≥ Surrealism deck">
								<div class="deck-preview">
									<img src="../decks/miro-tarot-cards/18-the-star.png" alt="The Star">
								</div>
								<h3 data-translate="miro">Mir√≥ Surrealism</h3>
							</div>

							<!-- Picasso Cubism -->
							<div class="deck-card" onclick="selectDeck('picasso')" tabindex="0" onkeydown="if(event.key==='Enter'||event.key===' '){event.preventDefault();selectDeck('picasso');}" role="button" aria-label="Select Picasso Cubism deck">
								<div class="deck-preview">
									<img src="../decks/picasso-tarot-cards/11-wheel-of-fortune.png" alt="Wheel of Fortune">
								</div>
								<h3 data-translate="picasso">Picasso Cubism</h3>
							</div>
						</div>
					</section>

					<!-- Card Gallery (initially hidden) -->
					<section id="card-gallery">
						<button class="btn btn-secondary" onclick="returnToDeckSelection()">
							<span>‚Üê</span>
							<span data-translate="backButton">Back to Deck Selection</span>
						</button>
						<h2 class="gallery-title" id="gallery-title">All Cards</h2>
					<!-- Skeleton Loading Screen -->
					<div id="gallery-skeleton" class="skeleton-deck-grid" style="display: none;" aria-hidden="true">
						<span class="skeleton-loading-text">Loading gallery...</span>
						<!-- Generate 18 skeleton cards (3 rows of 6) -->
						<div class="skeleton-gallery-item skeleton"></div>
						<div class="skeleton-gallery-item skeleton"></div>
						<div class="skeleton-gallery-item skeleton"></div>
						<div class="skeleton-gallery-item skeleton"></div>
						<div class="skeleton-gallery-item skeleton"></div>
						<div class="skeleton-gallery-item skeleton"></div>
						<div class="skeleton-gallery-item skeleton"></div>
						<div class="skeleton-gallery-item skeleton"></div>
						<div class="skeleton-gallery-item skeleton"></div>
						<div class="skeleton-gallery-item skeleton"></div>
						<div class="skeleton-gallery-item skeleton"></div>
						<div class="skeleton-gallery-item skeleton"></div>
						<div class="skeleton-gallery-item skeleton"></div>
						<div class="skeleton-gallery-item skeleton"></div>
						<div class="skeleton-gallery-item skeleton"></div>
						<div class="skeleton-gallery-item skeleton"></div>
						<div class="skeleton-gallery-item skeleton"></div>
						<div class="skeleton-gallery-item skeleton"></div>
					</div>

						<div class="card-grid" id="card-grid">
							<!-- Cards will be dynamically rendered here -->
						</div>
					</section>

					<!-- Lightbox -->
					<div id="lightbox" onclick="closeLightbox()" role="dialog" aria-modal="true" aria-label="Card image viewer">
						<div class="lightbox-content" onclick="event.stopPropagation()">
							<button class="lightbox-close" onclick="closeLightbox()" aria-label="Close lightbox">‚úï</button>
							<img id="lightbox-img" src="" alt="">
						</div>
					</div>

				</section>

			<!-- Footer -->
				<footer id="footer">
					<ul class="icons">
						<li><a href="https://www.instagram.com/my.tarot.today/" target="_blank" rel="noopener noreferrer" class="icon brands fa-instagram"><span class="label">Instagram</span></a></li>
					</ul>
					<ul class="copyright">
						<li>&copy; My Tarot Today. All rights reserved.</li>
					</ul>
				</footer>

		</div>

		<!-- Scripts -->
		<script src="../assets/js/jquery.min.js"></script>
		<script src="../assets/js/jquery.dropotron.min.js"></script>
		<script src="../assets/js/jquery.scrollex.min.js"></script>
		<script src="../assets/js/browser.min.js"></script>
		<script src="../assets/js/breakpoints.min.js"></script>
		<script src="../assets/js/util.js"></script>
		<script src="../assets/js/main.js"></script>

		<!-- Unified Deck System -->
		<script src="../decks/shared/DeckRegistry.js"></script>
		<script src="../decks/shared/PathResolver.js"></script>
		<script src="../decks/shared/DeckLoader.js"></script>

		<!-- Load unified card meanings -->
		<script src="../decks/data/card-meanings-loader.js"></script>

		<script>
		// Language translations
		const translations = {
			en: {
				title: "Card Gallery",
				subtitle: "Browse all cards from each deck",
				chooseYourDeck: "Select one to browse all cards",
					riderWaite: "Rider-Waite Classic",
					artistic: "Artistic Tarot",
					miro: "Mir√≥ Surrealism",
			picasso: "Picasso Cubism",
				searchPlaceholder: "Search for a deck...",
				noResults: "No decks found",
				backButton: "Back to Deck Selection",
				allCards: "All Cards"
			},
			fr: {
				title: "Galerie de Cartes",
				subtitle: "Parcourez toutes les cartes de chaque jeu",
				chooseYourDeck: "S√©lectionnez-en un pour parcourir toutes les cartes",
					riderWaite: "Rider-Waite Classique",
					artistic: "Tarot Artistique",
					miro: "Surr√©alisme de Mir√≥",
			picasso: "Cubisme de Picasso",
				searchPlaceholder: "Rechercher un jeu...",
				noResults: "Aucun jeu trouv√©",
				backButton: "Retour √† la s√©lection",
				allCards: "Toutes les Cartes"
			},
			es: {
				title: "Galer√≠a de Cartas",
				subtitle: "Explora todas las cartas de cada mazo",
				chooseYourDeck: "Selecciona uno para explorar todas las cartas",
					riderWaite: "Rider-Waite Cl√°sico",
					artistic: "Tarot Art√≠stico",
					miro: "Surrealismo de Mir√≥",
			picasso: "Cubismo de Picasso",
				searchPlaceholder: "Buscar un mazo...",
				noResults: "No se encontraron mazos",
				backButton: "Volver a la selecci√≥n",
				allCards: "Todas las Cartas"
			},
			zh: {
				title: "Âç°ÁâåÁîªÂªä",
				subtitle: "ÊµèËßàÊØè‰∏™ÁâåÁªÑÁöÑÊâÄÊúâÂç°Áâå",
				chooseYourDeck: "ÈÄâÊã©‰∏Ä‰∏™ÊµèËßàÊâÄÊúâÂç°Áâå",
					riderWaite: "ÁªèÂÖ∏Ëé±Âæ∑‰ºüÁâπ",
					artistic: "Ëâ∫ÊúØÂ°îÁΩó",
					miro: "Á±≥ÁΩóË∂ÖÁé∞ÂÆû",
				picasso: "ÊØïÂä†Á¥¢Á´ã‰ΩìÊ¥æ",
				searchPlaceholder: "ÊêúÁ¥¢ÁâåÁªÑ...",
				noResults: "Êú™ÊâæÂà∞ÁâåÁªÑ",
				backButton: "ËøîÂõûÈÄâÊã©",
				allCards: "ÊâÄÊúâÂç°Áâå"
			},
			ja: {
				title: "„Ç´„Éº„Éâ„ÇÆ„É£„É©„É™„Éº",
				subtitle: "ÂêÑ„Éá„ÉÉ„Ç≠„ÅÆ„Åô„Åπ„Å¶„ÅÆ„Ç´„Éº„Éâ„ÇíÈñ≤Ë¶ß",
				chooseYourDeck: "„Åô„Åπ„Å¶„ÅÆ„Ç´„Éº„Éâ„ÇíÈñ≤Ë¶ß„Åô„Çã„Å´„ÅØ1„Å§ÈÅ∏Êäû„Åó„Å¶„Åè„Å†„Åï„ÅÑ",
					riderWaite: "„É©„Ç§„ÉÄ„Éº„Ç¶„Çß„Ç§„Éà„ÇØ„É©„Ç∑„ÉÉ„ÇØ",
					artistic: "„Ç¢„Éº„ÉÜ„Ç£„Çπ„ÉÜ„Ç£„ÉÉ„ÇØ„Çø„É≠„ÉÉ„Éà",
					miro: "„Éü„É≠„Ç∑„É•„É´„É¨„Ç¢„É™„Ç∫„É†",
				picasso: "„Éî„Ç´„ÇΩ„Ç≠„É•„Éì„Ç∫„É†",
				searchPlaceholder: "„Éá„ÉÉ„Ç≠„ÇíÊ§úÁ¥¢...",
				noResults: "„Éá„ÉÉ„Ç≠„ÅåË¶ã„Å§„Åã„Çä„Åæ„Åõ„Çì",
				backButton: "ÈÅ∏Êäû„Å´Êàª„Çã",
				allCards: "„Åô„Åπ„Å¶„ÅÆ„Ç´„Éº„Éâ"
			},
			ko: {
				title: "Ïπ¥Îìú Í∞§Îü¨Î¶¨",
				subtitle: "Í∞Å Îç±Ïùò Î™®Îì† Ïπ¥Îìú ÌÉêÏÉâ",
				chooseYourDeck: "Î™®Îì† Ïπ¥ÎìúÎ•º ÌÉêÏÉâÌïòÎ†§Î©¥ ÌïòÎÇòÎ•º ÏÑ†ÌÉùÌïòÏÑ∏Ïöî",
				riderWaite: "ÎùºÏù¥Îçî Ïõ®Ïù¥Ìä∏ ÌÅ¥ÎûòÏãù",
					artistic: "ÏïÑÌã∞Ïä§Ìã± ÌÉÄÎ°ú",
					miro: "ÎØ∏Î°ú Ï¥àÌòÑÏã§Ï£ºÏùò",
			picasso: "ÌîºÏπ¥ÏÜå ÏûÖÏ≤¥Ï£ºÏùò",
				searchPlaceholder: "Îç± Í≤ÄÏÉâ...",
				noResults: "Îç±ÏùÑ Ï∞æÏùÑ Ïàò ÏóÜÏäµÎãàÎã§",
				backButton: "ÏÑ†ÌÉùÏúºÎ°ú ÎèåÏïÑÍ∞ÄÍ∏∞",
				allCards: "Î™®Îì† Ïπ¥Îìú"
			}
		};

		// Load saved language preference or default to English
		let currentLanguage = localStorage.getItem('tarotLanguage') || 'en';
		let currentDeck = null;
		let currentCard = null;
		let currentIsReversed = false;
		let currentReading = '';


		function selectDeck(deckType) {
			currentDeck = deckType;

			// Hide deck selection
			const deckSelection = document.getElementById('deck-selection');
			deckSelection.style.display = 'none';

			// Show card gallery
			showCardGallery(deckType);
		}

		function showCardGallery(deckType) {
			const gallery = document.getElementById('card-gallery');
			const cardGrid = document.getElementById('card-grid');
			const galleryTitle = document.getElementById('gallery-title');

			// Clear previous cards
			cardGrid.innerHTML = '';

			// Map deck type to DeckRegistry ID
			const deckIdMap = {
				'rider': 'rider-waite',
				'artistic': 'artistic',
				'miro': 'miro',
				'picasso': 'picasso'
			};
			const deckId = deckIdMap[deckType] || 'rider-waite';

			// Get all cards from unified DeckLoader
			const allCards = DeckLoader.getAllCards();

			// Get deck name from translations
			let deckName = '';
			if (deckType === 'rider') {
				deckName = translations[currentLanguage].riderWaite;
			} else if (deckType === 'artistic') {
				deckName = translations[currentLanguage].artistic;
			} else if (deckType === 'miro') {
				deckName = translations[currentLanguage].miro;
			} else if (deckType === 'picasso') {
				deckName = translations[currentLanguage].picasso;
			}

			// Update gallery title
			const trans = translations[currentLanguage];
			galleryTitle.textContent = `${trans.allCards} - ${deckName}`;

			// Render cards in batches for better performance
			// Calculate intelligent initial batch size based on viewport
			const viewportHeight = window.innerHeight;
			const cardHeight = 300; // Approximate card height in pixels
			const cardsPerRow = window.innerWidth > 1024 ? 6 : (window.innerWidth > 768 ? 4 : 3);
			const visibleRows = Math.ceil(viewportHeight / cardHeight) + 1; // +1 for buffer
			const INITIAL_BATCH_SIZE = Math.max(12, visibleRows * cardsPerRow); // At least 12 cards
			const PROGRESSIVE_BATCH_SIZE = 30; // Larger batches for subsequent loads

			let currentIndex = 0;
			let isFirstBatch = true;

			function renderNextBatch() {
				const batchSize = isFirstBatch ? INITIAL_BATCH_SIZE : PROGRESSIVE_BATCH_SIZE;
				const endIndex = Math.min(currentIndex + batchSize, allCards.length);
				const batch = allCards.slice(currentIndex, endIndex);

				// Use DocumentFragment for better performance
				const fragment = document.createDocumentFragment();

				batch.forEach(card => {
					const cardThumbnail = document.createElement('div');
					cardThumbnail.className = 'card-thumbnail';

					// Use unified DeckLoader for all decks
					const picture = DeckLoader.createResponsiveImage(deckId, card, {
						thumbnail: true,
						loading: 'lazy',
						className: ''
					});

					cardThumbnail.appendChild(picture);

					// Get full resolution path for lightbox
					const fullResPath = DeckLoader.getImagePath(deckId, card);
					cardThumbnail.onclick = () => enlargeCard(fullResPath, card.name);

					fragment.appendChild(cardThumbnail);
				});

				// Batch DOM update
				cardGrid.appendChild(fragment);
				currentIndex = endIndex;
				isFirstBatch = false;

				// If there are more cards, render them after a short delay
				if (currentIndex < allCards.length) {
					setTimeout(renderNextBatch, 0);
				}
			}

			// Start rendering the first batch
			renderNextBatch();

			// Show gallery
			gallery.classList.add('visible');
		}

		function enlargeCard(imagePath, cardName) {
			const lightbox = document.getElementById('lightbox');
			const lightboxImg = document.getElementById('lightbox-img');

			lightboxImg.src = imagePath;
			lightbox.classList.add('visible');

			// Add keyboard event listener for Escape key
			document.addEventListener('keydown', handleLightboxKeydown);
		}

		function closeLightbox() {
			const lightbox = document.getElementById('lightbox');
			const lightboxImg = document.getElementById('lightbox-img');

			lightbox.classList.remove('visible');

			// Reset zoom when closing (MEDIUM PRIORITY FIX)
			lightboxImg.style.transform = 'scale(1)';
			currentScale = 1;

			// Remove keyboard event listener
			document.removeEventListener('keydown', handleLightboxKeydown);
		}

		function handleLightboxKeydown(event) {
			if (event.key === 'Escape') {
				closeLightbox();
			}
		}

		// Pinch-to-zoom functionality for lightbox (MEDIUM PRIORITY FIX)
		let currentScale = 1;
		let initialDistance = 0;

		function initializePinchZoom() {
			const lightboxImg = document.getElementById('lightbox-img');

			if (!lightboxImg) return;

			// Touch event handlers for pinch-to-zoom
			let touches = [];

			lightboxImg.addEventListener('touchstart', (e) => {
				touches = Array.from(e.touches);

				if (touches.length === 2) {
					e.preventDefault();
					initialDistance = getDistance(touches[0], touches[1]);
				}
			}, { passive: false });

			lightboxImg.addEventListener('touchmove', (e) => {
				touches = Array.from(e.touches);

				if (touches.length === 2) {
					e.preventDefault();

					const currentDistance = getDistance(touches[0], touches[1]);
					const scale = currentDistance / initialDistance;

					// Apply zoom with limits (min 1x, max 4x)
					currentScale = Math.max(1, Math.min(4, currentScale * scale));
					lightboxImg.style.transform = `scale(${currentScale})`;
					lightboxImg.style.transition = 'none'; // Disable transition during pinch

					initialDistance = currentDistance;
				}
			}, { passive: false });

			lightboxImg.addEventListener('touchend', (e) => {
				if (e.touches.length < 2) {
					lightboxImg.style.transition = 'transform 0.3s ease'; // Re-enable smooth transition
				}
			}, { passive: true });

			// Double-tap to reset zoom
			let lastTapTime = 0;
			lightboxImg.addEventListener('touchend', (e) => {
				const currentTime = new Date().getTime();
				const tapGap = currentTime - lastTapTime;

				if (tapGap < 300 && tapGap > 0 && e.touches.length === 0) {
					// Double tap detected
					if (currentScale > 1) {
						// Reset zoom
						currentScale = 1;
						lightboxImg.style.transform = 'scale(1)';
					} else {
						// Zoom in to 2x
						currentScale = 2;
						lightboxImg.style.transform = 'scale(2)';
					}
				}

				lastTapTime = currentTime;
			}, { passive: true });
		}

		function getDistance(touch1, touch2) {
			const dx = touch1.clientX - touch2.clientX;
			const dy = touch1.clientY - touch2.clientY;
			return Math.sqrt(dx * dx + dy * dy);
		}

		function filterDecks() {
			const searchInput = document.getElementById('deck-search');
			const searchTerm = searchInput.value.toLowerCase().trim();
			const deckCards = document.querySelectorAll('.deck-card');
			const noResults = document.getElementById('no-results');
			const clearButton = document.querySelector('.search-clear');

			// Show/hide clear button
			if (searchTerm) {
				clearButton.classList.add('visible');
			} else {
				clearButton.classList.remove('visible');
			}

			let hasVisibleDecks = false;

			// Filter deck cards
			deckCards.forEach(card => {
				const deckName = card.querySelector('h3').textContent.toLowerCase();

				if (deckName.includes(searchTerm)) {
					card.style.display = 'block';
					hasVisibleDecks = true;
				} else {
					card.style.display = 'none';
				}
			});

			// Show/hide no results message
			if (!hasVisibleDecks && searchTerm) {
				noResults.classList.add('visible');
			} else {
				noResults.classList.remove('visible');
			}
		}

		function clearSearch() {
			const searchInput = document.getElementById('deck-search');
			searchInput.value = '';
			filterDecks();
			searchInput.focus();
		}

		function returnToDeckSelection() {
			// Hide card gallery
			document.getElementById('card-gallery').classList.remove('visible');

			// Show deck selection
			const deckSelection = document.getElementById('deck-selection');
			deckSelection.style.display = 'block';

			// Reset
			currentDeck = null;
		}


		function changeLanguage() {
			currentLanguage = document.getElementById('language-select').value;

			// Sync mobile dropdown
			const mobileSelect = document.getElementById('language-select-mobile');
			if (mobileSelect) mobileSelect.value = currentLanguage;

			localStorage.setItem('tarotLanguage', currentLanguage);
			updateUILanguage();
		}

		function changeMobileLanguage() {
			currentLanguage = document.getElementById('language-select-mobile').value;

			// Sync desktop dropdown
			document.getElementById('language-select').value = currentLanguage;

			localStorage.setItem('tarotLanguage', currentLanguage);
			updateUILanguage();
		}

		async function updateUILanguage() {
			const trans = translations[currentLanguage];

			// Update all translatable elements
			document.getElementById('title').textContent = trans.title;
			document.getElementById('subtitle').textContent = trans.subtitle;

			const elements = document.querySelectorAll('[data-translate]');
			elements.forEach(el => {
				const key = el.getAttribute('data-translate');
				if (trans[key]) {
					if (el.tagName === 'INPUT' || el.tagName === 'BUTTON') {
						el.value = trans[key];
					} else {
						el.textContent = trans[key];
					}
				}
			});

			// Update placeholder translations
			const placeholderElements = document.querySelectorAll('[data-translate-placeholder]');
			placeholderElements.forEach(el => {
				const key = el.getAttribute('data-translate-placeholder');
				if (trans[key]) {
					el.placeholder = trans[key];
				}
			});

		}

		// Initialize
		window.onload = function() {
			// Add language dropdown to mobile nav (after main.js creates navPanel)
			setTimeout(function() {
				const navPanel = document.querySelector('#navPanel nav');
				if (navPanel && !document.getElementById('language-select-mobile')) {
					const mobileDropdownHTML = `
						<div class="link depth-0" style="padding: 1em; border-top: solid 1px rgba(255, 255, 255, 0.05);">
							<select id="language-select-mobile" onchange="changeMobileLanguage()" aria-label="Select language" style="width: 100%; padding: 10px; border-radius: 5px; border: 1px solid rgba(255,255,255,0.3); background: rgba(255,255,255,0.1); color: white; font-size: 0.9em;">
								<option value="en">üá¨üáß English</option>
								<option value="fr">üá´üá∑ Fran√ßais</option>
								<option value="es">üá™üá∏ Espa√±ol</option>
								<option value="zh">üá®üá≥ ‰∏≠Êñá</option>
								<option value="ja">üáØüáµ Êó•Êú¨Ë™û</option>
								<option value="ko">üá∞üá∑ ÌïúÍµ≠Ïñ¥</option>
							</select>
						</div>
					`;
					navPanel.insertAdjacentHTML('beforeend', mobileDropdownHTML);

					// Set mobile dropdown to saved language
					const mobileSelect = document.getElementById('language-select-mobile');
					if (mobileSelect) mobileSelect.value = currentLanguage;
				}
			}, 150);

			// Set desktop dropdown to saved language
			document.getElementById('language-select').value = currentLanguage;

			updateUILanguage();

			// Initialize pinch-to-zoom for lightbox images (MEDIUM PRIORITY FIX)
			initializePinchZoom();


			// ============================================
			// Skeleton Screen Loader for Gallery
			// ============================================
			(function initGallerySkeletonLoader() {
				const gallerySkeleton = document.getElementById('gallery-skeleton');
				const cardGrid = document.getElementById('card-grid');

				if (!gallerySkeleton || !cardGrid) {
					// Elements not found, ensure grid is visible
					if (cardGrid) {
						cardGrid.style.opacity = '1';
						cardGrid.style.pointerEvents = 'auto';
					}
					return;
				}

				let skeletonShown = false;
				let observerActive = false;

				function showSkeleton() {
					if (skeletonShown) return;
					skeletonShown = true;
					gallerySkeleton.style.display = 'grid';
					cardGrid.style.opacity = '0';
					cardGrid.style.pointerEvents = 'none';
				}

				function hideSkeleton() {
					if (!skeletonShown && cardGrid.style.opacity !== '0') {
						// Already visible, ensure it stays that way
						cardGrid.style.opacity = '1';
						cardGrid.style.pointerEvents = 'auto';
						return;
					}

					gallerySkeleton.style.transition = 'opacity 0.3s ease-out';
					gallerySkeleton.style.opacity = '0';
					cardGrid.style.transition = 'opacity 0.3s ease-in';
					cardGrid.style.opacity = '1';
					cardGrid.style.pointerEvents = 'auto';

					setTimeout(() => {
						gallerySkeleton.style.display = 'none';
						gallerySkeleton.setAttribute('aria-hidden', 'true');
					}, 300);
				}

				// Watch for cards to be added to the grid
				const observer = new MutationObserver((mutations) => {
					if (cardGrid.children.length > 0) {
						hideSkeleton();
						if (observerActive) {
							observer.disconnect();
							observerActive = false;
						}
					}
				});

				// Start observing immediately
				observer.observe(cardGrid, { childList: true });
				observerActive = true;

				// Show skeleton if cards haven't rendered within 100ms
				setTimeout(() => {
					if (cardGrid.children.length === 0) {
						showSkeleton();
					} else {
						// Cards already loaded, ensure they're visible
						hideSkeleton();
						if (observerActive) {
							observer.disconnect();
							observerActive = false;
						}
					}
				}, 100);

				// Fallback: hide skeleton after 3 seconds
				setTimeout(() => {
					if (gallerySkeleton.style.display !== 'none') {
						console.warn('Gallery skeleton timeout - forcing hide');
						hideSkeleton();
					}
					if (observerActive) {
						observer.disconnect();
						observerActive = false;
					}
				}, 3000);
			})();
		};
		</script>

		<!-- Locale Formatter -->
		<script src="/locale-formatter.js"></script>

		<!-- PWA Initialization -->
		<script src="/pwa-init.js"></script>
	</body>
</html>
