<!DOCTYPE HTML>
<!--
	Alpha by HTML5 UP
	html5up.net | @ajlkn
	Free for personal and commercial use under the CCA 3.0 license (html5up.net/license)
-->
<html>
	<head>
		<!-- Google Analytics -->
		<script async src="https://www.googletagmanager.com/gtag/js?id=G-EXTBHDX0C2"></script>
		<script>
		  window.dataLayer = window.dataLayer || [];
		  function gtag(){dataLayer.push(arguments);}
		  gtag('js', new Date());
		  gtag('config', 'G-EXTBHDX0C2');
		</script>

		<title>Tarot Dictionary - Learn All 78 Card Meanings | My Tarot Today</title>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />

		<!-- Favicons -->
		<link rel="icon" type="image/png" sizes="32x32" href="../images/icons/favicon-32x32.png">
		<link rel="icon" type="image/png" sizes="16x16" href="../images/icons/favicon-16x16.png">
		<link rel="apple-touch-icon" sizes="180x180" href="../images/icons/apple-touch-icon.png">
		<link rel="icon" type="image/png" sizes="192x192" href="../images/icons/icon-192.png">
		<link rel="icon" type="image/png" sizes="512x512" href="../images/icons/icon-512.png">

		<!-- SEO Meta Tags -->
		<meta name="description" content="Complete tarot dictionary with all 78 cards from the Rider-Waite deck. Learn upright and reversed meanings with storytelling descriptions in 6 languages." />
		<meta name="keywords" content="tarot dictionary, tarot card meanings, rider-waite meanings, major arcana, minor arcana, tarot guide, learn tarot, tarot keywords" />
		<meta name="author" content="My Tarot Today" />
		<meta name="robots" content="index, follow" />
		<link rel="canonical" href="https://mytarottoday.com/dictionary.html" />

		<!-- Open Graph / Facebook -->
		<meta property="og:type" content="website" />
		<meta property="og:url" content="https://mytarottoday.com/dictionary.html" />
		<meta property="og:title" content="Tarot Dictionary - Learn All 78 Card Meanings" />
		<meta property="og:description" content="Master tarot with our comprehensive dictionary. All 78 Rider-Waite cards with keywords and storytelling descriptions in 6 languages." />
		<meta property="og:image" content="https://mytarottoday.com/tarot-background.jpg" />
		<meta property="og:site_name" content="My Tarot Today" />
		<meta property="og:locale" content="en_US" />

		<!-- Twitter Card -->
		<meta name="twitter:card" content="summary_large_image" />
		<meta name="twitter:url" content="https://mytarottoday.com/dictionary.html" />
		<meta name="twitter:title" content="Tarot Dictionary - Learn All 78 Card Meanings" />
		<meta name="twitter:description" content="Master tarot with our comprehensive dictionary. All 78 Rider-Waite cards with keywords and storytelling descriptions." />
		<meta name="twitter:image" content="https://mytarottoday.com/tarot-background.jpg" />

		<!-- Additional Meta Tags -->
		<meta name="theme-color" content="#9370DB" />
		<meta name="language" content="English" />
		<meta name="revisit-after" content="7 days" />
		<meta name="rating" content="general" />

		<link rel="stylesheet" href="../assets/css/main.css" />
		<style>
			/* Custom background with tarot image */
			body {
				background:
					linear-gradient(rgba(0, 0, 0, 0.7), rgba(0, 0, 0, 0.7)),
					url('../images/backgrounds/tarot-background.jpg') center/cover fixed;
			}

			#banner {
				background:
					linear-gradient(rgba(0, 0, 0, 0.5), rgba(0, 0, 0, 0.5)),
					url('../images/backgrounds/tarot-background.jpg') center/cover;
				box-shadow: inset 0 0 100px rgba(0, 0, 0, 0.3);
			}

			/* Make header text visible when scrolling over white background */
			#header:not(.alt) {
				background: rgba(255, 255, 255, 0.95) !important;
				box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
			}

			#header:not(.alt) h1 a,
			#header:not(.alt) nav a,
			#header:not(.alt) select {
				color: #333 !important;
			}

			/* Language dropdown text color and alignment */
			#language-select {
				color: #333;
			}

			#language-select option {
				line-height: 1.8;
				padding: 5px 0;
			}

			#banner h2#title {
				font-family: 'Apple Chancery', cursive, serif;
				font-size: 3.5em;
				font-weight: normal;
				letter-spacing: 1px;
			}

			/* Main container */
			#main.container {
				padding-top: 50px;
				padding-bottom: 50px;
			}

			/* Collapsible sections */
			.arcana-section {
				background: rgba(255, 255, 255, 0.95);
				backdrop-filter: blur(10px);
				margin: 30px 0;
				border-radius: 15px;
				overflow: hidden;
				box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
			}

			.section-header {
				background: white;
				padding: 20px 30px;
				cursor: pointer;
				display: flex;
				justify-content: space-between;
				align-items: center;
				transition: all 0.3s ease;
				box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
			}

			.section-header:hover {
				background: white;
				box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
			}

			.section-header h3 {
				color: #4c5c96;
				margin: 0;
				font-size: 1.5em;
			}

			.section-toggle {
				color: #4c5c96;
				font-size: 1.5em;
				transition: transform 0.3s ease;
			}

			.section-header.collapsed .section-toggle {
				transform: rotate(-90deg);
			}

			.section-content {
				padding: 40px 30px;
				max-height: 10000px;
				overflow: hidden;
				transition: max-height 0.4s ease, padding 0.4s ease;
			}

			.section-content.collapsed {
				max-height: 0;
				padding: 0 30px;
			}

			/* Card grid */
			.cards-grid {
				display: grid;
				grid-template-columns: repeat(3, 1fr);
				gap: 30px;
				justify-items: center;
			}

			/* Individual card */
			.tarot-card {
				position: relative;
				width: 280px;
				background: white;
				border-radius: 10px;
				box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
				transition: transform 0.3s ease, box-shadow 0.3s ease;
				cursor: pointer;
			}

			.tarot-card:hover {
				transform: translateY(-5px);
				box-shadow: 0 10px 25px rgba(0, 0, 0, 0.3);
			}

			.card-image {
				position: relative;
				width: 100%;
				aspect-ratio: 2/3;
				overflow: hidden;
				border-radius: 10px 10px 0 0;
			}

			.card-image img {
				width: 100%;
				height: 100%;
				object-fit: cover;
				display: block;
			}

			.card-info {
				padding: 18px;
				text-align: left;
			}

			.card-name {
				font-family: 'Apple Chancery', cursive, serif;
				font-weight: normal;
				font-size: 1.6em;
				color: #4c5c96;
				margin-bottom: 14px;
				text-align: center;
			}

			.card-keywords {
				font-size: 0.9em;
				line-height: 1.6;
			}

			.keyword-label {
				font-size: 0.75em;
				font-weight: bold;
				letter-spacing: 0.5px;
				margin-top: 8px;
				margin-bottom: 4px;
			}

			.keyword-label:first-child {
				margin-top: 0;
			}

			.keyword-upright-label {
				color: #4a7c59;
			}

			.keyword-reversed-label {
				color: #c44536;
			}

			.keyword-upright {
				color: #4a7c59;
				display: block;
			}

			.keyword-reversed {
				color: #c44536;
				display: block;
			}

			/* Overlay */
			.card-overlay {
				position: absolute;
				top: 0;
				left: 0;
				width: 100%;
				height: 100%;
				background: rgba(0, 0, 0, 0.88);
				display: flex;
				align-items: center;
				justify-content: center;
				padding: 20px;
				box-sizing: border-box;
				opacity: 0;
				transition: opacity 0.3s ease;
				pointer-events: none;
				border-radius: 10px 10px 0 0;
			}

			.card-overlay.active {
				opacity: 1;
				pointer-events: auto;
			}

			/* Desktop hover effect - only on non-touch devices */
			@media (hover: hover) and (pointer: fine) {
				.card-image:hover .card-overlay {
					opacity: 1;
					pointer-events: auto;
				}
			}

			.overlay-description {
				color: #ffffff;
				font-size: 0.95em;
				line-height: 1.6;
				text-align: left;
				max-height: 100%;
				overflow-y: auto;
			}

			/* Responsive design */
			@media (max-width: 768px) {
				.cards-grid {
					gap: 20px;
				}

				.tarot-card {
					width: 100%;
					max-width: 252px;
				}

				.card-name {
					font-size: 1.4em;
				}

				.card-keywords {
					font-size: 0.85em;
				}

				.overlay-description {
					font-size: 0.9em;
					padding: 15px;
				}

				.section-header {
					padding: 15px 20px;
				}

				.section-header h3 {
					font-size: 1.2em;
				}

				.section-content {
					padding: 30px 20px;
				}
			}

			@media (max-width: 480px) {
				.cards-grid {
					grid-template-columns: repeat(2, 1fr);
					gap: 15px;
				}

				.tarot-card {
					max-width: 180px;
				}

				.card-name {
					font-size: 1.1em;
				}

				.card-keywords {
					font-size: 0.8em;
				}

				.overlay-description {
					font-size: 0.85em;
					padding: 12px;
				}
			}

			#header.alt {
				background: transparent !important;
			}

			#header {
				background: rgba(255, 255, 255, 0.95);
				backdrop-filter: blur(10px);
			}

			#footer {
				background: rgba(0, 0, 0, 0.4);
				backdrop-filter: blur(10px);
			}
		</style>
	</head>
	<body class="landing is-preload">
		<div id="page-wrapper">

			<!-- Header -->
			<header id="header" class="alt">
				<h1><a href="../index.html">ðŸ”® My Tarot Today</a></h1>
				<nav id="nav">
					<ul>
						<li><a href="../index.html">Home</a></li>
						<li><a href="gallery.html">Gallery</a></li>
						<li><a href="journey.html">Fool's Journey</a></li>
						<li><a href="dictionary.html" class="active">Dictionary</a></li>
						<li class="language-dropdown">
							<select id="language-select" onchange="changeLanguage()" style="padding: 10px 20px; border-radius: 25px; border: 2px solid rgba(255, 255, 255, 0.8); font-size: 0.95em; background: rgba(255, 255, 255, 0.95); cursor: pointer; transition: all 0.3s ease; font-weight: 500; line-height: 1.4; vertical-align: middle;">
								<option value="en">ðŸ‡¬ðŸ‡§ English</option>
								<option value="fr">ðŸ‡«ðŸ‡· FranÃ§ais</option>
								<option value="es">ðŸ‡ªðŸ‡¸ EspaÃ±ol</option>
								<option value="zh">ðŸ‡¨ðŸ‡³ ä¸­æ–‡</option>
								<option value="ja">ðŸ‡¯ðŸ‡µ æ—¥æœ¬èªž</option>
								<option value="ko">ðŸ‡°ðŸ‡· í•œêµ­ì–´</option>
							</select>
						</li>
					</ul>
				</nav>
			</header>

			<!-- Banner -->
			<section id="banner">
				<h2 id="title" data-translate="title">Tarot Dictionary</h2>
				<p id="subtitle" data-translate="subtitle">Discover the meaning of all 78 cards</p>
			</section>

			<!-- Main -->
			<section id="main" class="container">

				<!-- Major Arcana Section -->
				<div class="arcana-section">
					<div class="section-header" onclick="toggleSection('major')">
						<h3 data-translate="majorArcana">Major Arcana (22 Cards)</h3>
						<span class="section-toggle">â–¼</span>
					</div>
					<div class="section-content" id="major-content">
						<div class="cards-grid" id="major-grid">
							<!-- Cards will be populated by JavaScript -->
						</div>
					</div>
				</div>

				<!-- Wands Section -->
				<div class="arcana-section">
					<div class="section-header collapsed" onclick="toggleSection('wands')">
						<h3 data-translate="wandsSuit">Wands - Fire & Passion (14 Cards)</h3>
						<span class="section-toggle">â–¼</span>
					</div>
					<div class="section-content collapsed" id="wands-content">
						<div class="cards-grid" id="wands-grid">
							<!-- Cards will be populated by JavaScript -->
						</div>
					</div>
				</div>

				<!-- Cups Section -->
				<div class="arcana-section">
					<div class="section-header collapsed" onclick="toggleSection('cups')">
						<h3 data-translate="cupsSuit">Cups - Water & Emotions (14 Cards)</h3>
						<span class="section-toggle">â–¼</span>
					</div>
					<div class="section-content collapsed" id="cups-content">
						<div class="cards-grid" id="cups-grid">
							<!-- Cards will be populated by JavaScript -->
						</div>
					</div>
				</div>

				<!-- Swords Section -->
				<div class="arcana-section">
					<div class="section-header collapsed" onclick="toggleSection('swords')">
						<h3 data-translate="swordsSuit">Swords - Air & Intellect (14 Cards)</h3>
						<span class="section-toggle">â–¼</span>
					</div>
					<div class="section-content collapsed" id="swords-content">
						<div class="cards-grid" id="swords-grid">
							<!-- Cards will be populated by JavaScript -->
						</div>
					</div>
				</div>

				<!-- Pentacles Section -->
				<div class="arcana-section">
					<div class="section-header collapsed" onclick="toggleSection('pentacles')">
						<h3 data-translate="pentaclesSuit">Pentacles - Earth & Material (14 Cards)</h3>
						<span class="section-toggle">â–¼</span>
					</div>
					<div class="section-content collapsed" id="pentacles-content">
						<div class="cards-grid" id="pentacles-grid">
							<!-- Cards will be populated by JavaScript -->
						</div>
					</div>
				</div>

			</section>

			<!-- Footer -->
			<footer id="footer">
				<ul class="icons">
					<li><a href="https://www.instagram.com/my.tarot.today/" target="_blank" rel="noopener noreferrer" class="icon brands fa-instagram"><span class="label">Instagram</span></a></li>
				</ul>
				<ul class="copyright">
					<li>&copy; My Tarot Today. All rights reserved.</li>
				</ul>
			</footer>

		</div>

		<!-- Scripts -->
		<script src="../assets/js/jquery.min.js"></script>
		<script src="../assets/js/jquery.dropotron.min.js"></script>
		<script src="../assets/js/jquery.scrollex.min.js"></script>
		<script src="../assets/js/browser.min.js"></script>
		<script src="../assets/js/breakpoints.min.js"></script>
		<script src="../assets/js/util.js"></script>
		<script src="../assets/js/main.js"></script>

		<!-- Load card data -->
		<script src="../decks/rider-waite-data.js"></script>
		<script src="../decks/card-descriptions.js"></script>

		<!-- Load keyword translations -->
		<script>
			// Load card keyword translations
			let cardKeywordTranslations = {};
			fetch('../decks/card-keyword-translations.json')
				.then(response => response.json())
				.then(data => {
					cardKeywordTranslations = data;
					console.log('Card keyword translations loaded');
				})
				.catch(error => console.error('Error loading keyword translations:', error));
		</script>

		<script>
		// Current language
		let currentLanguage = localStorage.getItem('tarotLanguage') || 'en';

		// Track which sections have been rendered (for lazy loading)
		const renderedSections = new Set();

		// Translations object (will be populated with comprehensive translations)
		const translations = {
			en: {
				title: "Tarot Dictionary",
				subtitle: "Discover the meaning of all 78 cards",
				majorArcana: "Major Arcana (22 Cards)",
				wandsSuit: "Wands - Fire & Passion (14 Cards)",
				cupsSuit: "Cups - Water & Emotions (14 Cards)",
				swordsSuit: "Swords - Air & Intellect (14 Cards)",
				pentaclesSuit: "Pentacles - Earth & Material (14 Cards)",
				upright: "Upright",
				reversed: "Reversed"
			},
			fr: {
				title: "Dictionnaire du Tarot",
				subtitle: "DÃ©couvrez la signification des 78 cartes",
				majorArcana: "Arcanes Majeurs (22 Cartes)",
				wandsSuit: "BÃ¢tons - Feu & Passion (14 Cartes)",
				cupsSuit: "Coupes - Eau & Ã‰motions (14 Cartes)",
				swordsSuit: "Ã‰pÃ©es - Air & Intellect (14 Cartes)",
				pentaclesSuit: "Deniers - Terre & MatÃ©riel (14 Cartes)",
				upright: "Ã€ l'endroit",
				reversed: "InversÃ©"
			},
			es: {
				title: "Diccionario del Tarot",
				subtitle: "Descubre el significado de las 78 cartas",
				majorArcana: "Arcanos Mayores (22 Cartas)",
				wandsSuit: "Bastos - Fuego & PasiÃ³n (14 Cartas)",
				cupsSuit: "Copas - Agua & Emociones (14 Cartas)",
				swordsSuit: "Espadas - Aire & Intelecto (14 Cartas)",
				pentaclesSuit: "Oros - Tierra & Material (14 Cartas)",
				upright: "Derecha",
				reversed: "Invertida"
			},
			zh: {
				title: "å¡”ç½—ç‰Œè¯å…¸",
				subtitle: "æŽ¢ç´¢å…¨éƒ¨78å¼ ç‰Œçš„å«ä¹‰",
				majorArcana: "å¤§é˜¿å¡é‚£ (22å¼ ç‰Œ)",
				wandsSuit: "æƒæ– - ç«ä¸Žæ¿€æƒ… (14å¼ ç‰Œ)",
				cupsSuit: "åœ£æ¯ - æ°´ä¸Žæƒ…æ„Ÿ (14å¼ ç‰Œ)",
				swordsSuit: "å®å‰‘ - é£Žä¸Žæ™ºæ…§ (14å¼ ç‰Œ)",
				pentaclesSuit: "æ˜Ÿå¸ - åœŸä¸Žç‰©è´¨ (14å¼ ç‰Œ)",
				upright: "æ­£ä½",
				reversed: "é€†ä½"
			},
			ja: {
				title: "ã‚¿ãƒ­ãƒƒãƒˆè¾žå…¸",
				subtitle: "å…¨78æžšã®ã‚«ãƒ¼ãƒ‰ã®æ„å‘³ã‚’ç™ºè¦‹",
				majorArcana: "å¤§ã‚¢ãƒ«ã‚«ãƒŠ (22æžš)",
				wandsSuit: "ãƒ¯ãƒ³ãƒ‰ - ç«ã¨æƒ…ç†± (14æžš)",
				cupsSuit: "ã‚«ãƒƒãƒ— - æ°´ã¨æ„Ÿæƒ… (14æžš)",
				swordsSuit: "ã‚½ãƒ¼ãƒ‰ - é¢¨ã¨çŸ¥æ€§ (14æžš)",
				pentaclesSuit: "ãƒšãƒ³ã‚¿ã‚¯ãƒ« - åœ°ã¨ç‰©è³ª (14æžš)",
				upright: "æ­£ä½ç½®",
				reversed: "é€†ä½ç½®"
			},
			ko: {
				title: "íƒ€ë¡œ ì‚¬ì „",
				subtitle: "78ìž¥ì˜ ì¹´ë“œ ì˜ë¯¸ë¥¼ ë°œê²¬í•˜ì„¸ìš”",
				majorArcana: "ë©”ì´ì € ì•„ë¥´ì¹´ë‚˜ (22ìž¥)",
				wandsSuit: "ì™„ë“œ - ë¶ˆê³¼ ì—´ì • (14ìž¥)",
				cupsSuit: "ì»µ - ë¬¼ê³¼ ê°ì • (14ìž¥)",
				swordsSuit: "ì†Œë“œ - ë°”ëžŒê³¼ ì§€ì„± (14ìž¥)",
				pentaclesSuit: "íŽœíƒ€í´ - ë•…ê³¼ ë¬¼ì§ˆ (14ìž¥)",
				upright: "ì •ë°©í–¥",
				reversed: "ì—­ë°©í–¥"
			}
		};

		// Toggle section collapse/expand
		function toggleSection(sectionId) {
			const header = event.currentTarget;
			const content = document.getElementById(sectionId + '-content');

			header.classList.toggle('collapsed');
			content.classList.toggle('collapsed');

			// Lazy load: render cards only when section is expanded
			if (!header.classList.contains('collapsed') && !renderedSections.has(sectionId)) {
				renderSectionCards(sectionId);
				renderedSections.add(sectionId);
			}
		}

		// Change language
		function changeLanguage() {
			currentLanguage = document.getElementById('language-select').value;

			// Sync mobile dropdown
			const mobileSelect = document.getElementById('language-select-mobile');
			if (mobileSelect) mobileSelect.value = currentLanguage;

			localStorage.setItem('tarotLanguage', currentLanguage);
			updateUILanguage();
		}

		// Update UI language
		function updateUILanguage() {
			const trans = translations[currentLanguage];

			// Update all translatable elements
			document.querySelectorAll('[data-translate]').forEach(el => {
				const key = el.getAttribute('data-translate');
				if (trans[key]) {
					el.textContent = trans[key];
				}
			});

			// Re-render only visible (already rendered) sections with new language
			renderedSections.forEach(sectionId => {
				renderSectionCards(sectionId);
			});
		}

		// Render specific section cards (for lazy loading)
		function renderSectionCards(sectionId) {
			// Ensure rider-waite data is loaded
			if (typeof riderWaiteData === 'undefined') {
				setTimeout(() => renderSectionCards(sectionId), 100);
				return;
			}

			// Generate minor cards if not already done
			if (riderWaiteData.cards.minor.length === 0) {
				riderWaiteData.generateMinorCards();
			}

			if (sectionId === 'major') {
				renderCardGrid('major', riderWaiteData.cards.major);
			} else {
				const suitCards = riderWaiteData.cards.minor.filter(c => c.suit === sectionId);
				renderCardGrid(sectionId, suitCards);
			}
		}

		// Render all cards (deprecated - now using lazy loading)
		function renderAllCards() {
			// Only render major arcana initially (it's expanded by default)
			if (!renderedSections.has('major')) {
				renderSectionCards('major');
				renderedSections.add('major');
			}
		}

		// Render card grid for a specific section
		function renderCardGrid(suitId, cards) {
			const grid = document.getElementById(suitId + '-grid');
			if (!grid) return;

			grid.innerHTML = '';

			cards.forEach((card, index) => {
				const cardEl = createCardElement(card, suitId, index);
				grid.appendChild(cardEl);
			});
		}

		// Get translated card name
		function getTranslatedCardName(englishName) {
			if (currentLanguage === 'en') return englishName;
			if (cardNameTranslations && cardNameTranslations[currentLanguage] && cardNameTranslations[currentLanguage][englishName]) {
				return cardNameTranslations[currentLanguage][englishName];
			}
			return englishName;
		}

		// Escape HTML to prevent breaking the template
		function escapeHtml(text) {
			const div = document.createElement('div');
			div.textContent = text;
			return div.innerHTML;
		}

		// Create card element
		function createCardElement(card, suitId, index) {
			const cardDiv = document.createElement('div');
			cardDiv.className = 'tarot-card';
			cardDiv.dataset.suit = suitId;
			cardDiv.dataset.index = index;

			// Get image path
			const imagePath = riderWaiteData.getImagePath(card);

			// Get card meanings
			const meaning = getCardMeaning(card.name);

			// Get translated card name
			const displayName = getTranslatedCardName(card.name);

			// Get description from cardDescriptions object
			const description = (cardDescriptions && cardDescriptions[currentLanguage] && cardDescriptions[currentLanguage][card.name])
				? cardDescriptions[currentLanguage][card.name]
				: `${card.name} represents a profound moment in the tarot journey.`;

			// Get translated labels
			const trans = translations[currentLanguage];
			const uprightLabel = trans.upright.toUpperCase();
			const reversedLabel = trans.reversed.toUpperCase();

			// Escape all text content to prevent HTML injection issues
			const safeDescription = escapeHtml(description);
			const safeDisplayName = escapeHtml(displayName);
			const safeUpright = meaning ? escapeHtml(meaning.upright) : '';
			const safeReversed = meaning ? escapeHtml(meaning.reversed) : '';

			cardDiv.innerHTML = `
				<div class="card-image">
					<img src="${imagePath}" alt="${escapeHtml(card.name)}" loading="lazy">
					<div class="card-overlay">
						<div class="overlay-description">${safeDescription}</div>
					</div>
				</div>
				<div class="card-info">
					<div class="card-name">${safeDisplayName}</div>
					<div class="card-keywords">
						<div class="keyword-label keyword-upright-label">${uprightLabel}</div>
						<span class="keyword-upright">${safeUpright}</span>
						<div class="keyword-label keyword-reversed-label">${reversedLabel}</div>
						<span class="keyword-reversed">${safeReversed}</span>
					</div>
				</div>
			`;

			// Add click handler for mobile
			const cardImage = cardDiv.querySelector('.card-image');
			const overlay = cardDiv.querySelector('.card-overlay');

			cardImage.addEventListener('click', function(e) {
				e.stopPropagation();
				// Toggle overlay on mobile/touch devices
				overlay.classList.toggle('active');
			});

			return cardDiv;
		}

		// Get card meaning from rider-waite data
		function getCardMeaning(cardName) {
			if (!riderWaiteData || !riderWaiteData.meanings) return null;

			// Check if we have translated keywords available
			if (typeof cardKeywordTranslations !== 'undefined' &&
				cardKeywordTranslations[currentLanguage] &&
				cardKeywordTranslations[currentLanguage][cardName]) {
				return cardKeywordTranslations[currentLanguage][cardName];
			}

			// Fallback to English keywords
			// Check major arcana
			const majorCard = riderWaiteData.meanings.major_arcana.find(c => c.name === cardName);
			if (majorCard) {
				return {
					upright: majorCard.upright,
					reversed: majorCard.reversed
				};
			}

			// Check minor arcana
			for (const suit in riderWaiteData.meanings.minor_arcana) {
				const minorCard = riderWaiteData.meanings.minor_arcana[suit].find(c => c.name === cardName);
				if (minorCard) {
					return {
						upright: minorCard.upright,
						reversed: minorCard.reversed
					};
				}
			}

			return null;
		}

		// Truncate text to fit in card
		function truncateText(text, maxLength) {
			if (text.length <= maxLength) return text;
			return text.substring(0, maxLength) + '...';
		}

		// Close overlays when clicking outside on mobile
		document.addEventListener('click', function(e) {
			if (!e.target.closest('.card-image')) {
				// Close all active overlays
				document.querySelectorAll('.card-overlay.active').forEach(overlay => {
					overlay.classList.remove('active');
				});
			}
		});

		// Change mobile language
		function changeMobileLanguage() {
			currentLanguage = document.getElementById('language-select-mobile').value;

			// Sync desktop dropdown
			document.getElementById('language-select').value = currentLanguage;

			localStorage.setItem('tarotLanguage', currentLanguage);
			updateUILanguage();
		}

		// Initialize on load
		document.addEventListener('DOMContentLoaded', function() {
			// Wait a moment for external scripts to load
			setTimeout(function() {
				// Add language dropdown to mobile nav (after main.js creates navPanel)
				setTimeout(function() {
					const navPanel = document.querySelector('#navPanel nav');
					if (navPanel && !document.getElementById('language-select-mobile')) {
						const mobileDropdownHTML = `
							<div class="link depth-0" style="padding: 1em; border-top: solid 1px rgba(255, 255, 255, 0.05);">
								<select id="language-select-mobile" onchange="changeMobileLanguage()" style="width: 100%; padding: 10px; border-radius: 5px; border: 1px solid rgba(255,255,255,0.3); background: rgba(255,255,255,0.1); color: white; font-size: 0.9em;">
									<option value="en">ðŸ‡¬ðŸ‡§ English</option>
									<option value="fr">ðŸ‡«ðŸ‡· FranÃ§ais</option>
									<option value="es">ðŸ‡ªðŸ‡¸ EspaÃ±ol</option>
									<option value="zh">ðŸ‡¨ðŸ‡³ ä¸­æ–‡</option>
									<option value="ja">ðŸ‡¯ðŸ‡µ æ—¥æœ¬èªž</option>
									<option value="ko">ðŸ‡°ðŸ‡· í•œêµ­ì–´</option>
								</select>
							</div>
						`;
						navPanel.insertAdjacentHTML('beforeend', mobileDropdownHTML);

						// Set mobile dropdown to saved language
						const mobileSelect = document.getElementById('language-select-mobile');
						if (mobileSelect) mobileSelect.value = currentLanguage;
					}
				}, 150);

				// Set saved language
				document.getElementById('language-select').value = currentLanguage;

				// Wait for translations to load, then render
				const checkTranslations = setInterval(function() {
					// Check if translations are loaded (cardDescriptions should have more than just 'en')
					if (typeof cardDescriptions !== 'undefined' &&
						(Object.keys(cardDescriptions).length > 1 || currentLanguage === 'en')) {
						clearInterval(checkTranslations);

						// Render all cards
						renderAllCards();

						// Update UI language
						updateUILanguage();
					}
				}, 100);

				// Fallback: render after 3 seconds even if translations aren't loaded
				setTimeout(function() {
					clearInterval(checkTranslations);
					if (renderedSections.size === 0) {
						renderAllCards();
						updateUILanguage();
					}
				}, 3000);
			}, 100);
		});
		</script>
	</body>
</html>
